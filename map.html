<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>External Map</title>

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.css" />
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/mobile/1.3.2/jquery.mobile-1.3.2.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>

<script>
$(document).ready(function(){
showCurrentLocation();

});
 
function findMyCurrentLocation(){
var geoService = navigator.geolocation;
if (geoService) {
	console.log("GEO SERVICE")
navigator.geolocation.getCurrentPosition(showCurrentLocation,errorHandler,{enableHighAccuracy:true});
} else {
alert("Your Browser does not support GeoLocation.");
}
}
 
function showCurrentLocation(){
	//Create the latlng object based on the GPS Position retrieved
	var latlng = new google.maps.LatLng (37.77218900879787,-122.4064996013827);
		//Set Google Map options
		var options = {
		zoom : 15,
		center : latlng,
		mapTypeId : google.maps.MapTypeId.ROADMAP
	};

	var $content = $("#map-page");

	//Set the height of the div containing the Map to rest of the screen
	$content.height(screen.height - 50);
	//Display the Map

	alert("Do the map")
	var map = new google.maps.Map ($content[0], options);
	
	/*
	for (var i = 0; i < hotels.length; i++) {
         var marker = new google.maps.Marker({
             position: new google.maps.LatLng(hotels[i][1], hotels[i][2]),
             map: map,
           //  icon: image,
             title: hotels[i][0],
             zIndex: hotels[i][3]
         });
     }
     */
	//Create the Marker and Drop It
	new google.maps.Marker ({ map : map,
		animation : google.maps.Animation.DROP,
		position : latlng
	});
}
 
function errorHandler(error){
alert("Error while retrieving current position. Error code: " + error.code + ",Message: " + error.message);
}

this.addEventListener('message', function(event) {
            alert(JSON.parse(event.data));
     }, false);

</script>

</head>
<body>
  	<div id="map-canvas"></div>
<!-- Start of the second page that shows the map #map-page -->
<div id="map-page" >
 
</div>
 
</body>
</html>